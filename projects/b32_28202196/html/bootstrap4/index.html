<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bootstrap v4 - WebFrame</title>

  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.6.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.6.2/css/bootstrap-theme.min.css">

  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="app" class="container-fluid">
    <div class="row" style="height: calc(100vh - 62px + 57px);">
      <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
        <h3 class="text-center pt-2 pb-0 mb-0">WebFrame</h3>
        <div class="sidebar-sticky pt-3">
          <div v-for="(item,index) in frames" :key="index" :class="{'d-none':item.visible===false}">
            <h6 v-if="item.title" class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-2 mb-1 text-muted"> <span>{{item.title}}</span> </h6>
            <ul class="nav flex-column pl-2">
              <li v-for="site in item.children" class="nav-item" @click="handleActive(site)">
                <a :href="'?url='+site.url" :class="{'nav-link py-1':true,'active':site.url==active,'d-none':site.visible===false}" :data-src="site.url">
                  <img class="nav-ico" :src="site.ico||site.url+'/favicon.ico'">
                  <span> {{site.title}} </span>
                </a>
              </li>
            </ul>

          </div>
        </div>
      </nav>
      <div class="col-md-9 ml-sm-auto col-lg-10 px-0">
        <iframe id="iframe" class="w-100 h-100" :src="active" frameborder="0" onload="iFrameOnLoad(this)"></iframe>
      </div>
    </div>
  </div>

  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.slim.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.6.2/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/vue@2.7.16/dist/vue.min.js"></script>

  <script src="script.js"></script>
  <script>
    new Vue({
      el: "#app",
      data: {
        active: "http://langnang.byethost32.com",
        frames: [
          {
            title: "",
            type: "group",
            children: [
              { title: "langnang.byethost32.com", url: "http://langnang.byethost32.com", type: "site" },
              { title: "b32-28202196.22web.org", url: "http://b32-28202196.22web.org", type: "site", visible: false },
              { title: "storage-mount.22web.org", url: "http://storage-mount.22web.org", type: "site", },
              { title: "webstack.22web.org", url: "http://webstack.22web.org", type: "site", },
              { title: "awesome.22web.org", url: "http://awesome.22web.org", type: "site", },
              { title: "cheatsheet.22web.org", url: "http://cheatsheet.22web.org", type: "site", },
              { title: "quote.22web.org", url: "http://quote.22web.org", type: "site", },
              { title: "templates.22web.org", url: "http://templates.22web.org", type: "site", },
              { title: "examples.22web.org", url: "http://examples.22web.org", type: "site", },
              { title: "frameworks.22web.org", url: "http://frameworks.22web.org", type: "site", },
              { title: "softwares.22web.org", url: "http://softwares.22web.org", type: "site", },
              { title: "tools.22web.org", url: "http://tools.22web.org", type: "site", },
              { title: "phpbadge.22web.org", url: "http://phpbadge.22web.org", type: "site", },
              { title: "phpspider.22web.org", url: "http://phpspider.22web.org", type: "site", },
            ],
          },
        ],
      },
      computed: {
        sidebar() {
          let html;
          console.log(`sidebar`, this.frames)
          if (this.frames.length == 0) return '';
          if (this.frames[0].type == 'site') {
            html = '';
          } else if (this.frames[0].type == 'group') {
            html = '';
          }
          return '';
        }
      },
      created() {
        // this.fetchData();
      },
      methods: {
        handleActive(site) {
          console.log(`handleActive`, site);
          this.active = site.url;
        },
        fetchData() {
          fetch("./../config.json").then(res => res.json()).then(res => {
            console.log(`fetchData`, res)
            const { frames } = res;
            this.frames = frames;
          })
        }
      }
    })
  </script>
</body>

</html>